SET(LIB_NAME ArtifactVis2)

SET(PLUGIN_HEADERS
    ArtifactVis2.h
    vvtokenizer.h
    skeleton.h
    MCylinder.h
    protocol/skeletonframe.pb.h
    protocol/skeleton.pb.h
    protocol/colormap.pb.h
    protocol/depthmap.pb.h
    protocol/pointcloud.pb.h
    protocol/packing.pb.h
)

ADD_LIBRARY(${LIB_NAME}
    "SHARED"
    ${PLUGIN_HEADERS}
    ArtifactVis2.cpp
    vvtokenizer.cpp
    skeleton.cpp
    MCylinder.cpp
    protocol/skeletonframe.pb.cc
    protocol/skeleton.pb.cc
    protocol/colormap.pb.cc
    protocol/depthmap.pb.cc
    protocol/pointcloud.pb.cc
    protocol/packing.pb.cc
)

#SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-cpp")

FIND_PACKAGE(MXML)
FIND_PACKAGE(Spacenav)
#FIND_PACKAGE(VRPN)
#FIND_PACKAGE(Omicron)
#FIND_PACKAGE(OSSIMPLANET)
#FIND_PACKAGE(OSSIM)

#IF(OSSIM_FOUND AND OSSIMPLANET_FOUND)
 #   ADD_DEFINITIONS(-DWITH_OSSIMPLANET)
  #  INCLUDE_DIRECTORIES(${OSSIMPLANET_INCLUDE_DIR})
   # INCLUDE_DIRECTORIES(${OSSIM_INCLUDE_DIR})
    #TARGET_LINK_LIBRARIES(${LIB_NAME} ${OSSIMPLANET_LIBRARY})
 #   TARGET_LINK_LIBRARIES(${LIB_NAME} ${OSSIM_LIBRARY})
  #  TARGET_LINK_LIBRARIES(${LIB_NAME} OssimPlanet)
#ENDIF(OSSIM_FOUND AND OSSIMPLANET_FOUND)

#INCLUDE_DIRECTORIES(/home/calvr/CalVR/include /home/calvr/CalVR/extern_libs/include /home/calvr/calvr_plugins/common)
INCLUDE_DIRECTORIES(${OSG_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${MXML_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${SPACENAV_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${VRPN_INCLUDE_DIR})
INCLUDE_DIRECTORIES(/home/marcin/X/calvr_plugins/calit2/ArtifactVis2/)


#INCLUDE_DIRECTORIES(${OMICRON_INCLUDE_DIR})

INCLUDE_DIRECTORIES(/home/marcin/X/zmq/include)
TARGET_LINK_LIBRARIES(${LIB_NAME} /home/marcin/X/zmq/lib/libzmq.so)

INCLUDE_DIRECTORIES(/home/marcin/X/protobuf/include)
TARGET_LINK_LIBRARIES(${LIB_NAME} /home/marcin/X/protobuf/lib/libprotobuf.so)

INCLUDE_DIRECTORIES(/home/marcin/X/snappy/include)
TARGET_LINK_LIBRARIES(${LIB_NAME} /home/marcin/X/snappy/lib/libsnappy.so)



TARGET_LINK_LIBRARIES(${LIB_NAME} ${OSG_LIBRARIES})
TARGET_LINK_LIBRARIES(${LIB_NAME} ${MXML_LIBRARY})
TARGET_LINK_LIBRARIES(${LIB_NAME} ${SPACENAV_LIBRARY})

TARGET_LINK_LIBRARIES(${LIB_NAME} "-luuid")

ADD_CALVR_LIBRARIES(${LIB_NAME})

INSTALL(TARGETS ${LIB_NAME} DESTINATION lib/plugins)
